/*C21*/SET SCHEMA PUBLIC
alter table account drop constraint FKnnwpo0lfq4xai1rs6887sx02k
alter table account_operations drop constraint FK3namuh51vuenmj6egwsuufue2
alter table account_operations drop constraint FKjtij4yq4xahoexihyb2wjwxd1
alter table customer drop constraint FKd2u6ldox75ftunaantly5fh56
alter table operation drop constraint FKrgrgnb2yu5skl5vysfmf5c44m
drop table account if exists
drop table account_operations if exists
drop table customer if exists
drop table operation if exists
create table account (number varchar(255) not null, balance bigint not null check (balance>=0), customer_id bigint, primary key (number))
create table account_operations (account_number varchar(255) not null, operations_id bigint not null)
create table customer (id bigint generated by default as identity (start with 1), first_name varchar(255) not null, last_name varchar(255) not null, account_number varchar(255), primary key (id))
create table operation (id bigint generated by default as identity (start with 1), amount bigint, date timestamp, type varchar(255), account_number varchar(255), primary key (id))
alter table account_operations add constraint UK_rd5xyjnhok692qkedgsltu9i0 unique (operations_id)
alter table account add constraint FKnnwpo0lfq4xai1rs6887sx02k foreign key (customer_id) references customer
alter table account_operations add constraint FK3namuh51vuenmj6egwsuufue2 foreign key (operations_id) references operation
alter table account_operations add constraint FKjtij4yq4xahoexihyb2wjwxd1 foreign key (account_number) references account
alter table customer add constraint FKd2u6ldox75ftunaantly5fh56 foreign key (account_number) references account
alter table operation add constraint FKrgrgnb2yu5skl5vysfmf5c44m foreign key (account_number) references account
